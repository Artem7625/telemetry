# Telemetry Service App

Telemetry Service App - это веб-приложение, которое предоставляет HTTP API для общения с тестовым сервером. Оно позволяет смотреть данные телеметрии в реальном времени с использованием websocket. Приложение позволяет получать информацию о пусконаладке и изменять имя инженера пусконаладки. В качестве клиента можно использовать браузер.

# Установка и запуск приложения

1. Клонируйте репозиторий с исходным кодом приложения. Вы можете сделать это с помощью команды git clone:
```
git clone https://github.com/Artem7625/telemetry.git
```
2. В корневой папке проекта создайте виртуальное окружение командой:
```
python3 -m venv venv
```
3. Активируйте виртуальное окружение с помощью команды:
```
source venv/bin/activate
```
4. Установите зависимости, необходимые для работы приложения, с использованием pip:
```
pip install -r requirements.txt
```
5. Для работы приложения потребуется запустить тестовый сервер в Docker контейнере, выполнив команду:
```
docker run -p 6379:6379 -p 5555:5555/udp -d goldarte/cpilot-testbox
```
Это запустит контейнер с сервером, который будет слушать на портах 6379 (для Redis) и 5555 (для других служб).

6. Запустите FastAPI сервер. Для этого перейдите в директорию src/, в которой находится файл main.py и выполните команду:
```
python3 main.py
```

После успешного запуска приложения, перейдите в браузере по этим адресам:
- для получения информации о пусконаладке http://127.0.0.1:8082/service/page
- для просмотра данных телеметрии http://127.0.0.1:8082/telemetry

# API эндпоинты
Для получения данных телеметрии, сервисных данных и установки имени инженера пусконаладки используются следующие API эндпоинты:

1. ### Получение тестовой страницы
URL: /service/page

Метод: GET

Описание: Этот эндпоинт предназначен для получения тестовой HTML-страницы, которая используется для тестирования различных запросов.

2. ### Установка имени инженера
URL: /service/name

Метод: POST

Описание: Этот эндпоинт предназначен для установки имени инженера.

Параметры запроса: "name" (строка): Имя инженера.
```
{
    "name": "Фамилия И.О."
}
```
3. ### Получение сервисных данных
URL: /service/name

Метод: GET

Описание: Этот эндпоинт предназначен для получения информаци о пусконаладке.

Пример успешного ответа:
```
{
  "vehicle_model": "RSM_Torum750",
  "license_plate": "6573ТМ99",
  "name": "Иванов А.И.",
  "equipment": [
    "Блок управления G2NP (SN:20090266)",
    "Блок навигации G2NAV (SN:21030003)"
  ],
  "timestamp": "2021-08-25T16:10:23+03:00"
}
```

# WebSocket Эндпоинты

1. ### Получение веб-страницы для отслеживания телеметрии
URL: /telemetry/

Метод: GET

Описание: Этот WebSocket-эндпоинт предоставляет HTML-страницу для отслеживания телеметрии.

Пример успешного ответа: HTML-страница для отслеживания телеметрии.

Подключение к потоку данных телеметрии
URL: /telemetry/ws

Метод: WebSocket

Описание: Этот WebSocket-эндпоинт предназначен для установки соединения с потоком данных телеметрии. После подключения, он ожидает передачу данных от сервера телеметрии и передает их клиенту.
